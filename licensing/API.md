# Corlink API Documentation

## Table of Contents

- [Introduction](#introduction)
- [Content Types](#content-types)
- [Authentication](#authentication)
- [Errors](#errors)
- [Rate Limits](#rate-limits)
- [API Endpoints](#api-endpoints)
  - [GET /](#get-)
  - [POST /generate](#post-generate)
  - [POST /verify](#post-verify)
  - [POST /delete](#post-delete)
  - [Admin Only Endpoints](#admin-only-endpoints)
    - [POST /create-user](#post-create-user)
    - [POST /delete-user](#post-delete-user)
    - [POST /get-user](#post-get-user)
    - [POST /update-user](#post-update-user)

## Introduction

This document describes the API used in the Corlink licensing server. This API is designed to be relatively simple and easy to use. It is based on the RESTful principles and uses JSON as the data format.

## Content Types

The API only supports JSON as the data format. This means you ***MUST*** set the `Content-Type` header to `application/json` when making a request.

## Authentication

The API uses API keys to authenticate and verify requests. You can view/reset your key by using our Discord bot in [Ruby Network](https://dsc.gg/rubynetwork). Or, if you are self hosting the server the admin api key located in the .env file will work. Make sure to keep your API key secure and do not share it with anyone.

The header for the API key is `authorization`.

The key is sent as a Bearer token in the `authorization` header.

The way to use the API key is to set the `authorization` header in Javascript like this:

```Javascript
fetch('https://api.corlink.xyz/apiroute', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_API_KEY'
    //other headers
    },
})
```

## Errors

The API uses standard HTTP status codes to indicate the success or failure of a request. In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that failed given the information provided (e.g., a required parameter was omitted, a charge failed, etc.), and codes in the 5xx range indicate an error with Corlink's servers.

## Rate Limits

Currently the API doesn't have any rate limits, but we may add them in the future.

## API Endpoints

### GET / 

This endpoint is used to check if the API is online. It is also the derivative of any other endpoint.

### POST /generate

This endpoint is used to generate a license key. It only requires the `authorization` header to be set to the API key.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "YOUR_LICENSE_KEY"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/generate', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    },
})
```

### POST /verify

This endpoint is used to verify a license key. It requires the `authorization` header to be set to the API key and the `key` parameter to be set to a license key generated by the `/generate` endpoint.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "Authorized"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/verify', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    'key': 'A_LICENSE_KEY'
    },
})
```

### POST /delete

This endpoint is used to delete a license key. It requires the `authorization` header to be set to the API key and the `key` parameter to be set to a license key generated by the `/generate` endpoint.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "Deleted"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/delete', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    'key': 'A_LICENSE_KEY'
    },
})
```

## Admin Only Endpoints

These endpoints are only available to the admin API key (set in the .env file).

### POST /create-user

This endpoint is used to create a user and the user's corresponding API key. It requires the `authorization` header to be set to the admin API key and the `user` header to be set to the name of the user.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "API_KEY"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/create-user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    'user': 'USERNAME'
    },
})
```

### POST /delete-user

This endpoint is used to delete a user and the user's corresponding API key. It requires the `authorization` header to be set to the admin API key and the `user` header to be set to the name of the user.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "Deleted"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/delete-user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    'user': 'USERNAME'
    },
})
```

### POST /get-user 

This endpoint is used to get the API key of a user. It requires the `authorization` header to be set to the admin API key and the `user` header to be set to the name of the user.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "API_KEY"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/get-user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN'
    'user': 'USERNAME'
    },
})
```

### POST /update-user

This endpoint is used to update the API key of a user. It requires the `authorization` header to be set to the admin API key and the `user` header to be set to the name of the user.

The response will be a simple response with the status and the message of the response.

```
{
    "status": "ok",
    "message": "API_KEY"
}
```

An example of how to use this endpoint in Javascript:

```Javascript
fetch('https://api.corlink.xyz/update-user', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
    'authorization': 'Bearer YOUR_TOKEN',
    'user': 'USERNAME'
    },
})
